<!DOCTYPE html>

<head>
	<title>Basic App</title>

	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<link rel="stylesheet" href="../src/stylesheets/base.css">
	<style>
		body.demo-cursor {
			cursor: pointer;
			cursor: url(finger.png) 25 25, pointer;
		}
		body.demo-cursor:active {
			cursor: pointer;
			cursor: url(finger-active.png) 25 25, pointer;
		}
	</style>
</head>



<div class="app-page" data-page="home">
	<div class="app-topbar">
		<div class="app-title"><span class="app-icon"></span>Basic App</div>
	</div>

	<div class="app-content">
		<div class="app-section">
			<div class="app-button" data-target="lists">Lists</div>
			<div class="app-button" data-target="buttons">Buttons</div>
			<div class="app-button" data-target="inputs">Inputs</div>
		</div>
	</div>
</div>

<div class="app-page" data-page="lists">
	<div class="app-topbar">
		<div class="left app-button" data-back="true" data-autotitle="true"></div>
		<div class="app-title"><span class="app-icon"></span>Lists</div>
	</div>

	<div class="app-content">
		<ul class="app-list">
			<label>Label 1</label>
			<li class="app-button" data-target="lists">Item 1</li>
			<li class="app-button">Item 2</li>
			<li class="app-button">Item 3</li>
			<label>Label 2</label>
			<li>Item 4</li>
			<li>Item 5</li>
			<li>Item 6</li>
			<label>Label 3</label>
			<li>Item 7</li>
			<li>Item 8</li>
			<li>Item 9</li>
			<label>Label 4</label>
			<li>Item 10</li>
			<li>Item 11</li>
			<li>Item 12</li>
		</ul>
	</div>
</div>

<div class="app-page" data-page="buttons">
	<div class="app-topbar">
		<div class="left app-button" data-back="true" data-autotitle="true"></div>
		<div class="app-title"><span class="app-icon"></span>Buttons</div>
		<div class="right app-button app-menu">Dialog</div>
	</div>

	<div class="app-content">
		<div class="app-section">
			<ul class="app-list">
				<li class="app-button">Item 1</li>
				<li class="app-button">Item 2</li>
				<li class="app-button">Item 3</li>
			</ul>
		</div>

		<div class="app-section">
			<div class="app-button red">Button 1</div>
			<div class="app-button green">Button 2</div>
			<div class="app-button blue">Button 3</div>
		</div>
	</div>
</div>

<div class="app-page" data-page="inputs">
	<div class="app-topbar">
		<div class="left app-button" data-back="true" data-autotitle="true"></div>
		<div class="app-title"><span class="app-icon"></span>Inputs</div>
	</div>

	<div class="app-content">
		<input class="app-input" type="search" placeholder="Search..">

		<div class="app-section">
			<input class="app-input" placeholder="Input">
		</div>

		<div class="app-section">
			<input class="app-input" placeholder="Input">
			<textarea class="app-input" placeholder="Textarea"></textarea>
			<div class="app-button green">Send</div>
		</div>
	</div>
</div>



<script>
	(function (window, document) {
		var query = function (queryString) {
			var re           = /([^&=]+)=([^&]+)/g,
				decodedSpace = /\+/g;

			var result = {},
				m, key, value;

			if (queryString) {
				queryString = queryString.replace(decodedSpace, '%20');

				while ((m = re.exec(queryString))) {
					key   = decodeURIComponent( m[1] );
					value = decodeURIComponent( m[2] );
					result[ key ] = value;
				}
			}

			return result;
		}( window.location.href.split('?')[1] );

		if ( !query.style ) {
			return;
		}

		var link  = document.createElement('link');
		link.rel = 'stylesheet';
		link.href = '../src/stylesheets/'+query.style+'.css';
		document.querySelector('head').appendChild(link);

		if (query._app_platform) {
			document.body.className += ' demo-cursor';
		}
	})(window, document);
</script>

<script src="../src/lib/swapper.js"    ></script>
<script src="../src/lib/clickable.js"  ></script>
<script src="../src/lib/scrollable.js" ></script>
<script src="../src/app.js"            ></script>
<script src="../src/utils.js"          ></script>
<script src="../src/metrics.js"        ></script>
<script src="../src/dialog.js"         ></script>
<script src="../src/pages.js"          ></script>
<script src="../src/core.js"           ></script>

<script>
	App.populator('lists', function (page) {
		page.addEventListener('appShow', function () {
			console.log('lists page is visible');
		}, false);

		page.addEventListener('appHide', function () {
			console.log('lists page is invisible');
		}, false);

		page.addEventListener('appBack', function () {
			console.log('lists page is going back');
		}, false);

		page.addEventListener('appForward', function () {
			console.log('lists page is going forward');
		}, false);
	});

	App.populator('buttons', function (page) {
		this.restorable = false;
		page.querySelector('.app-menu').addEventListener('click', function () {
			App.dialog({
				tweetButton  : 'Share on Facebook' ,
				fbButton     : 'Share on Twitter'  ,
				gpButton     : 'Share on Google+'  ,
				okButton     : 'Share on Kik' ,
				cancelButton : 'Cancel'
			});
		}, false);
	});

	try {
		App.restore();
	}
	catch (err) {
		App.load('home');
	}
</script>
